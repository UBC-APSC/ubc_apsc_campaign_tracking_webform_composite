(function($,Drupal,drupalSettings){const utmParams=drupalSettings.ubc_apsc_campaign_tracking_webform_composite.vars;function captureUtmVars(utmParams){const urlParams=new URLSearchParams(window.location.search);utmParams.forEach(param=>{const value=urlParams.get(param);const storageKey='act_'+param;if(param=='document_referrer'&&!getLocalStorageItem(storageKey)){let referrer=document.referrer;let currentHost=window.location.hostname;if(referrer){let referrerHost=new URL(referrer).hostname;if(referrerHost!==currentHost){setLocalStorageItem(storageKey,referrer)}}}else if(value){setLocalStorageItem(storageKey,value)}})}function getLocalStorageItem(name){const item=localStorage.getItem(name);if(!item){return null}return JSON.parse(item)}function setLocalStorageItem(name,value){localStorage.setItem(name,JSON.stringify(value))}function clearLocalStorageItem(){utmParams.forEach(param=>{localStorage.removeItem('act_'+param)})};$(function(){captureUtmVars(utmParams)});window.addEventListener("CookiebotOnLoad",function(e){var cookieConsent=window.Cookiebot.consent;if(typeof cookieConsent!=='undefined'&&!cookieConsent.marketing){clearLocalStorageItem()}},false)})(jQuery,Drupal,drupalSettings);